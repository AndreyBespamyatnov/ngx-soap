{"version":3,"file":"ngxsoap.umd.js","sources":["../src/libts/utils.ts","../src/libts/nscontext.ts","../src/libts/wsdl.ts","../src/libts/client.ts","../src/libts/soap.ts","../src/soap.service.ts","../src/ngx-soap.module.ts","../src/libts/security/basic-auth-security.ts"],"sourcesContent":["// import * as crypto from '                     crypto-js/sha1';\n// import * as buffer from \"buffer/\";\n\n// export function passwordDigest(nonce, created, password) {\n//   // digest = base64 ( sha1 ( nonce + created + password ) )\n//   var pwHash = crypto.createHash('sha1');\n//   var rawNonce = buffer.Buffer(nonce || '', 'base64').toString('binary');\n//   pwHash.update(rawNonce + created + password);\n//   return pwHash.digest('base64');\n// };\n\nexport var TNS_PREFIX = '__tns__'; // Prefix for targetNamespace\n\n/**\n * Find a key from an object based on the value\n * @param {Object} Namespace prefix/uri mapping\n * @param {*} nsURI value\n * @returns {String} The matching key\n */\nexport function findPrefix(xmlnsMapping: any, nsURI: any) {\n  for (var n in xmlnsMapping) {\n    if (n === TNS_PREFIX) continue;\n    if (xmlnsMapping[n] === nsURI) {\n      return n;\n    }\n  }\n};\n","export class NamespaceScope {\n  namespaces: any = {};\n  parent: any;\n\n  /**\n   * Scope for XML namespaces\n   * @param {NamespaceScope} [parent] Parent scope\n   * @returns {NamespaceScope}\n   * @constructor\n   */\n  constructor(parent: any) {\n    if (!(this instanceof NamespaceScope)) {\n      return new NamespaceScope(parent);\n    }\n    this.parent = parent;\n    this.namespaces = {};\n  }\n\n  /**\n   * Look up the namespace URI by prefix\n   * @param {String} prefix Namespace prefix\n   * @param {Boolean} [localOnly] Search current scope only\n   * @returns {String} Namespace URI\n   */\n  getNamespaceURI(prefix: any, localOnly: any) {\n    switch (prefix) {\n      case 'xml':\n        return 'http://www.w3.org/XML/1998/namespace';\n      case 'xmlns':\n        return 'http://www.w3.org/2000/xmlns/';\n      default:\n        var nsUri = this.namespaces[prefix];\n        /*jshint -W116 */\n        if (nsUri != null) {\n          return nsUri.uri;\n        } else if (!localOnly && this.parent) {\n          return this.parent.getNamespaceURI(prefix);\n        } else {\n          return null;\n        }\n    }\n  }\n\n  getNamespaceMapping(prefix: any) {\n    switch (prefix) {\n      case 'xml':\n        return {\n          uri: 'http://www.w3.org/XML/1998/namespace',\n          prefix: 'xml',\n          declared: true\n        };\n      case 'xmlns':\n        return {\n          uri: 'http://www.w3.org/2000/xmlns/',\n          prefix: 'xmlns',\n          declared: true\n        };\n      default:\n        var mapping = this.namespaces[prefix];\n        /*jshint -W116 */\n        if (mapping != null) {\n          return mapping;\n        } else if (this.parent) {\n          return this.parent.getNamespaceMapping(prefix);\n        } else {\n          return null;\n        }\n    }\n  }\n\n  /**\n   * Look up the namespace prefix by URI\n   * @param {String} nsUri Namespace URI\n   * @param {Boolean} [localOnly] Search current scope only\n   * @returns {String} Namespace prefix\n   */\n  getPrefix(nsUri: any, localOnly: any) {\n    switch (nsUri) {\n      case 'http://www.w3.org/XML/1998/namespace':\n        return 'xml';\n      case 'http://www.w3.org/2000/xmlns/':\n        return 'xmlns';\n      default:\n        for (var p in this.namespaces) {\n          if (this.namespaces[p].uri === nsUri) {\n            return p;\n          }\n        }\n        if (!localOnly && this.parent) {\n          return this.parent.getPrefix(nsUri);\n        } else {\n          return null;\n        }\n    }\n  }\n}\n\n/**\n * Namespace context that manages hierarchical scopes\n * @returns {NamespaceContext}\n * @constructor\n */\nexport class NamespaceContext {\n  currentScope: any;\n  prefixCount: number;\n  scopes: any[];\n\n  constructor() {\n    // if (!(this instanceof NamespaceContext)) {\n    //   return new NamespaceContext();\n    // }\n    this.scopes = [];\n    this.pushContext();\n    this.prefixCount = 0;\n  }\n\n  /**\n * Add a prefix/URI namespace mapping\n * @param {String} prefix Namespace prefix\n * @param {String} nsUri Namespace URI\n * @param {Boolean} [localOnly] Search current scope only\n * @returns {boolean} true if the mapping is added or false if the mapping\n * already exists\n */\n  addNamespace(prefix: any, nsUri: any, localOnly: any) {\n    if (this.getNamespaceURI(prefix, localOnly) === nsUri) {\n      return false;\n    }\n    if (this.currentScope) {\n      this.currentScope.namespaces[prefix] = {\n        uri: nsUri,\n        prefix: prefix,\n        declared: false\n      };\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Push a scope into the context\n   * @returns {NamespaceScope} The current scope\n   */\n  pushContext(): NamespaceScope {\n    var scope = new NamespaceScope(this.currentScope);\n    this.scopes.push(scope);\n    this.currentScope = scope;\n    return scope;\n  }\n\n  /**\n * Pop a scope out of the context\n * @returns {NamespaceScope} The removed scope\n */\n  popContext() {\n    var scope = this.scopes.pop();\n    if (scope) {\n      this.currentScope = scope.parent;\n    } else {\n      this.currentScope = null;\n    }\n    return scope;\n  }\n\n  /**\n   * Look up the namespace URI by prefix\n   * @param {String} prefix Namespace prefix\n   * @param {Boolean} [localOnly] Search current scope only\n   * @returns {String} Namespace URI\n   */\n  getNamespaceURI(prefix: any, localOnly: any) {\n    return this.currentScope && this.currentScope.getNamespaceURI(prefix, localOnly);\n  }\n\n  /**\n * Look up the namespace prefix by URI\n * @param {String} nsURI Namespace URI\n * @param {Boolean} [localOnly] Search current scope only\n * @returns {String} Namespace prefix\n */\n  getPrefix(nsUri: any, localOnly: any) {\n    return this.currentScope && this.currentScope.getPrefix(nsUri, localOnly);\n  }\n\n  /**\n   * Register a namespace\n   * @param {String} nsUri Namespace URI\n   * @returns {String} The matching or generated namespace prefix\n   */\n  registerNamespace = function (nsUri: any) {\n    var prefix = this.getPrefix(nsUri);\n    if (prefix) {\n      // If the namespace has already mapped to a prefix\n      return prefix;\n    } else {\n      // Try to generate a unique namespace\n      while (true) {\n        prefix = 'ns' + (++this.prefixCount);\n        if (!this.getNamespaceURI(prefix)) {\n          // The prefix is not used\n          break;\n        }\n      }\n    }\n    this.addNamespace(prefix, nsUri, true);\n    return prefix;\n  }\n\n  /**\n   * Declare a namespace prefix/uri mapping\n   * @param {String} prefix Namespace prefix\n   * @param {String} nsUri Namespace URI\n   * @returns {Boolean} true if the declaration is created\n   */\n  declareNamespace(prefix: any, nsUri: any) {\n    if (this.currentScope) {\n      var mapping = this.currentScope.getNamespaceMapping(prefix);\n      if (mapping && mapping.uri === nsUri && mapping.declared) {\n        return false;\n      }\n      this.currentScope.namespaces[prefix] = {\n        uri: nsUri,\n        prefix: prefix,\n        declared: true\n      };\n      return true;\n    }\n    return false;\n  }\n}","import * as _ from 'lodash';\nimport * as sax from 'sax';\nimport { resolve as resolveUrl } from \"url\";\nimport { TNS_PREFIX, findPrefix } from './utils';\nimport { NamespaceContext } from \"./nscontext\";\n\nconst stripBom = (x: string): string => {\n  // Catches EFBBBF (UTF-8 BOM) because the buffer-to-string\n  // conversion translates it to FEFF (UTF-16 BOM)\n  if (x.charCodeAt(0) === 0xFEFF) {\n    return x.slice(1);\n  }\n\n  return x;\n}\n\nconst Primitives = {\n  string: 1,\n  boolean: 1,\n  decimal: 1,\n  float: 1,\n  double: 1,\n  anyType: 1,\n  byte: 1,\n  int: 1,\n  long: 1,\n  short: 1,\n  negativeInteger: 1,\n  nonNegativeInteger: 1,\n  positiveInteger: 1,\n  nonPositiveInteger: 1,\n  unsignedByte: 1,\n  unsignedInt: 1,\n  unsignedLong: 1,\n  unsignedShort: 1,\n  duration: 0,\n  dateTime: 0,\n  time: 0,\n  date: 0,\n  gYearMonth: 0,\n  gYear: 0,\n  gMonthDay: 0,\n  gDay: 0,\n  gMonth: 0,\n  hexBinary: 0,\n  base64Binary: 0,\n  anyURI: 0,\n  QName: 0,\n  NOTATION: 0\n};\n\nconst trimLeft = /^[\\s\\xA0]+/;\nconst trimRight = /[\\s\\xA0]+$/;\n\nfunction appendColon(ns: string) {\n  return (ns && ns.charAt(ns.length - 1) !== ':') ? ns + ':' : ns;\n}\n\nfunction noColonNameSpace(ns: string) {\n  return (ns && ns.charAt(ns.length - 1) === ':') ? ns.substring(0, ns.length - 1) : ns;\n}\n\nfunction splitQName(nsName: string) {\n  if(typeof nsName !== 'string') return {\n    prefix: '',\n    name: nsName\n  };\n\n  var i = nsName.indexOf(':');\n  return i < 0 ? { prefix: TNS_PREFIX, name: nsName } :\n    { prefix: nsName.substring(0, i), name: nsName.substring(i + 1) };\n}\n\nfunction xmlEscape(obj: any) {\n  if (typeof (obj) === 'string') {\n    if (obj.substr(0, 9) === '<![CDATA[' && obj.substr(-3) === \"]]>\") {\n      return obj;\n    }\n    return obj\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&apos;');\n  }\n\n  return obj;\n}\n\nfunction trim(text: string) {\n  return text.replace(trimLeft, '').replace(trimRight, '');\n}\n\nfunction deepMerge(destination: any, source: any) {\n  return _.merge(destination || {}, source, (a: any, b: any) => {\n    return _.isArray(a) ? a.concat(b) : undefined;\n  });\n}\n\nexport function openWsdl(wsdlDef: string, options: any = {}): Promise<WSDL> {\n  return new Promise((resolve, reject) => {\n    let wsdl = new WSDL(wsdlDef, options);\n    resolve(wsdl.build());\n\n    // var request_headers = options.wsdl_headers;\n    // var request_options = options.wsdl_options;\n    // http.get(uri).subscribe(response => {\n    //   let wsdlDef = response.text();\n    //   if (!wsdlDef) reject(\"No wsdl found at url \" + uri)\n\n    //   try {\n    //     let wsdl = new WSDL(http, wsdlDef, uri, options);\n    //     resolve(wsdl.build());\n    //   } catch (e) {\n    //     reject(e);\n    //   }\n    // });\n  });\n}\n\nexport class WSDL {\n  xml: any;\n  services: any[];\n  definition: any; //WSDL definition: string or service definition\n  definitions: any; //WSDLElement type?\n  _originalIgnoredNamespaces: any;\n  options: any = {};\n\n  _includesWsdl: any[];\n  // uri: any;\n  ignoredNamespaces = ['tns', 'targetNamespace', 'typedNamespace'];\n  ignoreBaseNameSpaces = false;\n  valueKey = '$value';\n  xmlKey = '$xml';\n  xmlnsInEnvelope: any;\n\n  constructor(definition: string, options: any) {\n    this.definition = definition;\n    // this.uri = uri;\n    this._includesWsdl = [];\n    this._initializeOptions(options);\n  }\n\n  build(): Promise<any> {\n    return this._fromXML(stripBom(this.definition))\n      .then(() => this.processIncludes())\n      .then(definitions => {\n        var name;\n        this.definitions = definitions;\n\n        this.definitions.deleteFixedAttrs();\n        var services = this.services = this.definitions.services;\n        if (services) {\n          for (name in services) {\n            services[name].postProcess(this.definitions);\n          }\n        }\n        var complexTypes = this.definitions.complexTypes;\n        if (complexTypes) {\n          for (name in complexTypes) {\n            complexTypes[name].deleteFixedAttrs();\n          }\n        }\n\n        // for document style, for every binding, prepare input message element name to (methodName, output message element name) mapping\n        var bindings = this.definitions.bindings;\n        for (var bindingName in bindings) {\n          var binding = bindings[bindingName];\n          if (typeof binding.style === 'undefined') {\n            binding.style = 'document';\n          }\n          if (binding.style !== 'document') continue;\n          var methods = binding.methods;\n          var topEls: any = binding.topElements = {};\n          for (var methodName in methods) {\n            if (methods[methodName].input) {\n              var inputName = methods[methodName].input.$name;\n              var outputName = \"\";\n              if (methods[methodName].output)\n                outputName = methods[methodName].output.$name;\n              topEls[inputName] = { \"methodName\": methodName, \"outputName\": outputName };\n            }\n          }\n        }\n\n        this.xmlnsInEnvelope = this._xmlnsMap();\n\n        return this;\n      })\n      .catch(err => console.log(\"Build error\", err));\n  }\n\n  processIncludes(): Promise<any> {\n    var schemas = this.definitions.schemas;\n    var includes: any[] = [];\n\n    for (var ns in schemas) {\n      var schema = schemas[ns];\n      includes = includes.concat(schema.includes || []);\n    }\n\n    return this._processNextInclude(includes);\n  }\n\n  describeServices = function () {\n    var services: any = {};\n    for (var name in this.services) {\n      var service = this.services[name];\n      services[name] = service.description(this.definitions);\n    }\n    return services;\n  }\n\n  toXML(): string {\n    return this.xml || '';\n  }\n\n  objectToXML(obj: any, name: any, nsPrefix: any, nsURI: any, isFirst: any = {}, xmlnsAttr: any = {}, schemaObject?: any, nsContext?: any): string {\n    var self = this;\n    var schema = this.definitions.schemas[nsURI];\n\n    var parentNsPrefix = nsPrefix ? nsPrefix.parent : undefined;\n    if (typeof parentNsPrefix !== 'undefined') {\n      //we got the parentNsPrefix for our array. setting the namespace-variable back to the current namespace string\n      nsPrefix = nsPrefix.current;\n    }\n\n    parentNsPrefix = noColonNameSpace(parentNsPrefix);\n    if (this.isIgnoredNameSpace(parentNsPrefix)) {\n      parentNsPrefix = '';\n    }\n\n    var soapHeader = !schema;\n    var qualified = schema && schema.$elementFormDefault === 'qualified';\n    var parts = [];\n    var prefixNamespace = (nsPrefix || qualified) && nsPrefix !== TNS_PREFIX;\n\n    var xmlnsAttrib = '';\n    if (nsURI && isFirst) {\n      if (self.options.overrideRootElement && self.options.overrideRootElement.xmlnsAttributes) {\n        self.options.overrideRootElement.xmlnsAttributes.forEach(function (attribute: any) {\n          xmlnsAttrib += ' ' + attribute.name + '=\"' + attribute.value + '\"';\n        });\n      } else {\n        if (prefixNamespace && !this.isIgnoredNameSpace(nsPrefix)) {\n          // resolve the prefix namespace\n          xmlnsAttrib += ' xmlns:' + nsPrefix + '=\"' + nsURI + '\"';\n        }\n        // only add default namespace if the schema elementFormDefault is qualified\n        if (qualified || soapHeader) xmlnsAttrib += ' xmlns=\"' + nsURI + '\"';\n      }\n    }\n\n    if (!nsContext) {\n      nsContext = new NamespaceContext();\n      nsContext.declareNamespace(nsPrefix, nsURI);\n    } else {\n      nsContext.pushContext();\n    }\n\n    // explicitly use xmlns attribute if available\n    if (xmlnsAttr && !(self.options.overrideRootElement && self.options.overrideRootElement.xmlnsAttributes)) {\n      xmlnsAttrib = xmlnsAttr;\n    }\n\n    var ns: any = '';\n\n    if (self.options.overrideRootElement && isFirst) {\n      ns = self.options.overrideRootElement.namespace;\n    } else if (prefixNamespace && (qualified || isFirst || soapHeader) && !this.isIgnoredNameSpace(nsPrefix)) {\n      ns = nsPrefix;\n    }\n\n    var i, n;\n    // start building out XML string.\n    if (Array.isArray(obj)) {\n      for (i = 0, n = obj.length; i < n; i++) {\n        var item = obj[i];\n        var arrayAttr = self.processAttributes(item, nsContext),\n          correctOuterNsPrefix = parentNsPrefix || ns; //using the parent namespace prefix if given\n\n        parts.push(['<', appendColon(correctOuterNsPrefix), name, arrayAttr, xmlnsAttrib, '>'].join(''));\n        parts.push(self.objectToXML(item, name, nsPrefix, nsURI, false, null, schemaObject, nsContext));\n        parts.push(['</', appendColon(correctOuterNsPrefix), name, '>'].join(''));\n      }\n    } else if (typeof obj === 'object') {\n      for (name in obj) {\n        if (!obj.hasOwnProperty(name)) continue;\n        //don't process attributes as element\n        if (name === self.options.attributesKey) {\n          continue;\n        }\n        //Its the value of a xml object. Return it directly.\n        if (name === self.options.xmlKey) {\n          nsContext.popContext();\n          return obj[name];\n        }\n        //Its the value of an item. Return it directly.\n        if (name === self.options.valueKey) {\n          nsContext.popContext();\n          return xmlEscape(obj[name]);\n        }\n\n        var child = obj[name];\n        if (typeof child === 'undefined') {\n          continue;\n        }\n\n        var attr = self.processAttributes(child, nsContext);\n\n        var value = '';\n        var nonSubNameSpace = '';\n        var emptyNonSubNameSpace = false;\n\n        var nameWithNsRegex = /^([^:]+):([^:]+)$/.exec(name);\n        if (nameWithNsRegex) {\n          nonSubNameSpace = nameWithNsRegex[1] + ':';\n          name = nameWithNsRegex[2];\n        } else if (name[0] === ':') {\n          emptyNonSubNameSpace = true;\n          name = name.substr(1);\n        }\n\n        if (isFirst) {\n          value = self.objectToXML(child, name, nsPrefix, nsURI, false, null, schemaObject, nsContext);\n        } else {\n\n          if (self.definitions.schemas) {\n            if (schema) {\n              var childSchemaObject = self.findChildSchemaObject(schemaObject, name);\n              //find sub namespace if not a primitive\n              if (childSchemaObject &&\n                ((childSchemaObject.$type && (childSchemaObject.$type.indexOf('xsd:') === -1)) ||\n                  childSchemaObject.$ref || childSchemaObject.$name)) {\n                /*if the base name space of the children is not in the ingoredSchemaNamspaces we use it.\n                 This is because in some services the child nodes do not need the baseNameSpace.\n                 */\n\n                var childNsPrefix: any = '';\n                var childName: any = '';\n                var childNsURI: any;\n                var childXmlnsAttrib: any = '';\n\n                var elementQName = childSchemaObject.$ref || childSchemaObject.$name;\n                if (elementQName) {\n                  elementQName = splitQName(elementQName);\n                  childName = elementQName.name;\n                  if (elementQName.prefix === TNS_PREFIX) {\n                    // Local element\n                    childNsURI = childSchemaObject.$targetNamespace;\n                    childNsPrefix = nsContext.registerNamespace(childNsURI);\n                    if (this.isIgnoredNameSpace(childNsPrefix)) {\n                      childNsPrefix = nsPrefix;\n                    }\n                  } else {\n                    childNsPrefix = elementQName.prefix;\n                    if (this.isIgnoredNameSpace(childNsPrefix)) {\n                      childNsPrefix = nsPrefix;\n                    }\n                    childNsURI = schema.xmlns[childNsPrefix] || self.definitions.xmlns[childNsPrefix];\n                  }\n\n                  var unqualified = false;\n                  // Check qualification form for local elements\n                  if (childSchemaObject.$name && childSchemaObject.targetNamespace === undefined) {\n                    if (childSchemaObject.$form === 'unqualified') {\n                      unqualified = true;\n                    } else if (childSchemaObject.$form === 'qualified') {\n                      unqualified = false;\n                    } else {\n                      unqualified = schema.$elementFormDefault !== 'qualified';\n                    }\n                  }\n                  if (unqualified) {\n                    childNsPrefix = '';\n                  }\n\n                  if (childNsURI && childNsPrefix) {\n                    if (nsContext.declareNamespace(childNsPrefix, childNsURI)) {\n                      childXmlnsAttrib = ' xmlns:' + childNsPrefix + '=\"' + childNsURI + '\"';\n                      xmlnsAttrib += childXmlnsAttrib;\n                    }\n                  }\n                }\n\n                var resolvedChildSchemaObject;\n                if (childSchemaObject.$type) {\n                  var typeQName = splitQName(childSchemaObject.$type);\n                  var typePrefix = typeQName.prefix;\n                  var typeURI = schema.xmlns[typePrefix] || self.definitions.xmlns[typePrefix];\n                  childNsURI = typeURI;\n                  if (typeURI !== 'http://www.w3.org/2001/XMLSchema' && typePrefix !== TNS_PREFIX) {\n                    // Add the prefix/namespace mapping, but not declare it\n                    nsContext.addNamespace(typePrefix, typeURI);\n                  }\n                  resolvedChildSchemaObject =\n                    self.findSchemaType(typeQName.name, typeURI) || childSchemaObject;\n                } else {\n                  resolvedChildSchemaObject =\n                    self.findSchemaObject(childNsURI, childName) || childSchemaObject;\n                }\n\n                if (childSchemaObject.$baseNameSpace && this.options.ignoreBaseNameSpaces) {\n                  childNsPrefix = nsPrefix;\n                  childNsURI = nsURI;\n                }\n\n                if (this.options.ignoreBaseNameSpaces) {\n                  childNsPrefix = '';\n                  childNsURI = '';\n                }\n\n                ns = childNsPrefix;\n\n                if (Array.isArray(child)) {\n                  //for arrays, we need to remember the current namespace\n                  childNsPrefix = {\n                    current: childNsPrefix,\n                    parent: ns\n                  };\n                } else {\n                  //parent (array) already got the namespace\n                  childXmlnsAttrib = null;\n                }\n\n                value = self.objectToXML(child, name, childNsPrefix, childNsURI,\n                  false, childXmlnsAttrib, resolvedChildSchemaObject, nsContext);\n              } else if (obj[self.options.attributesKey] && obj[self.options.attributesKey].xsi_type) {\n                //if parent object has complex type defined and child not found in parent\n                var completeChildParamTypeObject = self.findChildSchemaObject(\n                  obj[self.options.attributesKey].xsi_type.type,\n                  obj[self.options.attributesKey].xsi_type.xmlns);\n\n                nonSubNameSpace = obj[self.options.attributesKey].xsi_type.prefix;\n                nsContext.addNamespace(obj[self.options.attributesKey].xsi_type.prefix,\n                  obj[self.options.attributesKey].xsi_type.xmlns);\n                value = self.objectToXML(child, name, obj[self.options.attributesKey].xsi_type.prefix,\n                  obj[self.options.attributesKey].xsi_type.xmlns, false, null, null, nsContext);\n              } else {\n                if (Array.isArray(child)) {\n                  name = nonSubNameSpace + name;\n                }\n\n                value = self.objectToXML(child, name, nsPrefix, nsURI, false, null, null, nsContext);\n              }\n            } else {\n              value = self.objectToXML(child, name, nsPrefix, nsURI, false, null, null, nsContext);\n            }\n          }\n        }\n\n        ns = noColonNameSpace(ns);\n        if (prefixNamespace && !qualified && isFirst && !self.options.overrideRootElement) {\n          ns = nsPrefix;\n        } else if (this.isIgnoredNameSpace(ns)) {\n          ns = '';\n        }\n\n        if (!Array.isArray(child)) {\n          // start tag\n          parts.push(['<', emptyNonSubNameSpace ? '' : appendColon(nonSubNameSpace || ns), name, attr, xmlnsAttrib,\n            (child === null ? ' xsi:nil=\"true\"' : ''), '>'].join(''));\n        }\n        parts.push(value);\n        if (!Array.isArray(child)) {\n          // end tag\n          parts.push(['</', emptyNonSubNameSpace ? '' : appendColon(nonSubNameSpace || ns), name, '>'].join(''));\n        }\n      }\n    } else if (obj !== undefined) {\n      parts.push((self.options.escapeXML) ? xmlEscape(obj) : obj);\n    }\n    nsContext.popContext();\n    return parts.join('');\n  }\n\n  /**\n * Create RPC style xml string from the parameters\n * @param {string} name\n * @param {*} params\n * @param {string} nsPrefix\n * @param {string} nsURI\n * @param {boolean} isParts\n * @returns {string}\n */\n  objectToRpcXML(name: string, params: any, nsPrefix: any, nsURI: string, isParts: boolean): string {\n    var parts = [];\n    var defs = this.definitions;\n    var nsAttrName = '_xmlns';\n\n    nsPrefix = nsPrefix || findPrefix(defs.xmlns, nsURI);\n\n    nsURI = nsURI || defs.xmlns[nsPrefix];\n    nsPrefix = nsPrefix === TNS_PREFIX ? '' : (nsPrefix + ':');\n\n    parts.push(['<', nsPrefix, name, '>'].join(''));\n\n    for (var key in params) {\n      if (!params.hasOwnProperty(key)) {\n        continue;\n      }\n      if (key !== nsAttrName) {\n        var value = params[key];\n        var prefixedKey = (isParts ? '' : nsPrefix) + key;\n        parts.push(['<', prefixedKey, '>'].join(''));\n        parts.push((typeof value === 'object') ? this.objectToXML(value, key, nsPrefix, nsURI) : xmlEscape(value));\n        parts.push(['</', prefixedKey, '>'].join(''));\n      }\n    }\n    parts.push(['</', nsPrefix, name, '>'].join(''));\n    return parts.join('');\n  }\n\n  /**\n * Create document style xml string from the parameters\n * @param {String} name\n * @param {*} params\n * @param {String} nsPrefix\n * @param {String} nsURI\n * @param {String} type\n */\n  objectToDocumentXML(name: string, params: any, nsPrefix: string, nsURI: string, type: string) {\n    var args: any = {};\n    args[name] = params;\n    var parameterTypeObj = type ? this.findSchemaObject(nsURI, type) : null;\n    return this.objectToXML(args, null, nsPrefix, nsURI, true, null, parameterTypeObj);\n  }\n\n  isIgnoredNameSpace(ns: string) {\n    return this.options.ignoredNamespaces.indexOf(ns) > -1;\n  }\n\n  filterOutIgnoredNameSpace(ns: string) {\n    var namespace = noColonNameSpace(ns);\n    return this.isIgnoredNameSpace(namespace) ? '' : namespace;\n  }\n\n  processAttributes(child: any, nsContext: any) {\n    var attr = '';\n\n    if (child === null) {\n      child = [];\n    }\n\n    var attrObj = child[this.options.attributesKey];\n    if (attrObj && attrObj.xsi_type) {\n      var xsiType = attrObj.xsi_type;\n\n      var prefix = xsiType.prefix || xsiType.namespace;\n      // Generate a new namespace for complex extension if one not provided\n      if (!prefix) {\n        prefix = nsContext.registerNamespace(xsiType.xmlns);\n      } else {\n        nsContext.declareNamespace(prefix, xsiType.xmlns);\n      }\n      xsiType.prefix = prefix;\n    }\n\n\n    if (attrObj) {\n      for (var attrKey in attrObj) {\n        //handle complex extension separately\n        if (attrKey === 'xsi_type') {\n          var attrValue = attrObj[attrKey];\n          attr += ' xsi:type=\"' + attrValue.prefix + ':' + attrValue.type + '\"';\n          attr += ' xmlns:' + attrValue.prefix + '=\"' + attrValue.xmlns + '\"';\n\n          continue;\n        } else {\n          attr += ' ' + attrKey + '=\"' + xmlEscape(attrObj[attrKey]) + '\"';\n        }\n      }\n    }\n\n    return attr;\n  }\n\n  findSchemaType(name: any, nsURI: any) {\n    if (!this.definitions.schemas || !name || !nsURI) {\n      return null;\n    }\n\n    var schema = this.definitions.schemas[nsURI];\n    if (!schema || !schema.complexTypes) {\n      return null;\n    }\n\n    return schema.complexTypes[name];\n  }\n\n  findChildSchemaObject(parameterTypeObj: any, childName: any, backtrace: any = []): any {\n    if (!parameterTypeObj || !childName) {\n      return null;\n    }\n\n    if (!backtrace) {\n      backtrace = [];\n    }\n\n    if (backtrace.indexOf(parameterTypeObj) >= 0) {\n      // We've recursed back to ourselves; break.\n      return null;\n    } else {\n      backtrace = backtrace.concat([parameterTypeObj]);\n    }\n\n    var found = null,\n      i = 0,\n      child,\n      ref;\n\n    if (Array.isArray(parameterTypeObj.$lookupTypes) && parameterTypeObj.$lookupTypes.length) {\n      var types = parameterTypeObj.$lookupTypes;\n\n      for (i = 0; i < types.length; i++) {\n        var typeObj = types[i];\n\n        if (typeObj.$name === childName) {\n          found = typeObj;\n          break;\n        }\n      }\n    }\n\n    var object = parameterTypeObj;\n    if (object.$name === childName && object.name === 'element') {\n      return object;\n    }\n    if (object.$ref) {\n      ref = splitQName(object.$ref);\n      if (ref.name === childName) {\n        return object;\n      }\n    }\n\n    var childNsURI;\n    if (object.$type) {\n      var typeInfo = splitQName(object.$type);\n      if (typeInfo.prefix === TNS_PREFIX) {\n        childNsURI = parameterTypeObj.$targetNamespace;\n      } else {\n        childNsURI = this.definitions.xmlns[typeInfo.prefix];\n      }\n      var typeDef = this.findSchemaType(typeInfo.name, childNsURI);\n      if (typeDef) {\n        return this.findChildSchemaObject(typeDef, childName, backtrace);\n      }\n    }\n\n    if (object.children) {\n      for (i = 0, child; child = object.children[i]; i++) {\n        found = this.findChildSchemaObject(child, childName, backtrace);\n        if (found) {\n          break;\n        }\n\n        if (child.$base) {\n          var baseQName = splitQName(child.$base);\n          var childNameSpace = baseQName.prefix === TNS_PREFIX ? '' : baseQName.prefix;\n          childNsURI = this.definitions.xmlns[baseQName.prefix];\n\n          var foundBase = this.findSchemaType(baseQName.name, childNsURI);\n\n          if (foundBase) {\n            found = this.findChildSchemaObject(foundBase, childName, backtrace);\n\n            if (found) {\n              found.$baseNameSpace = childNameSpace;\n              found.$type = childNameSpace + ':' + childName;\n              break;\n            }\n          }\n        }\n      }\n\n    }\n\n    if (!found && object.$name === childName) {\n      return object;\n    }\n\n    return found;\n  }\n\n  /**\n * Look up a XSD type or element by namespace URI and name\n * @param {String} nsURI Namespace URI\n * @param {String} qname Local or qualified name\n * @returns {*} The XSD type/element definition\n */\n  findSchemaObject = function (nsURI: string, qname: string): any {\n    if (!nsURI || !qname) {\n      return null;\n    }\n\n    var def = null;\n\n    if (this.definitions.schemas) {\n      var schema = this.definitions.schemas[nsURI];\n      if (schema) {\n        if (qname.indexOf(':') !== -1) {\n          qname = qname.substring(qname.indexOf(':') + 1, qname.length);\n        }\n\n        // if the client passed an input element which has a `$lookupType` property instead of `$type`\n        // the `def` is found in `schema.elements`.\n        def = schema.complexTypes[qname] || schema.types[qname] || schema.elements[qname];\n      }\n    }\n\n    return def;\n  }\n\n  xmlToObject(xml: any, callback?: any) {\n    var self = this;\n    // var p = typeof callback === 'function' ? {} : saxParser(true, {});\n    var p = sax.parser(true, {});\n    var objectName: any = null;\n    var root: any = {};\n    var schema: any = {\n      Envelope: {\n        Header: {\n          Security: {\n            UsernameToken: {\n              Username: 'string',\n              Password: 'string'\n            }\n          }\n        },\n        Body: {\n          Fault: {\n            faultcode: 'string',\n            faultstring: 'string',\n            detail: 'string'\n          }\n        }\n      }\n    };\n    var stack: any[] = [{ name: null, object: root, schema: schema }];\n    var xmlns: any = {};\n\n    var refs: any = {}, id; // {id:{hrefs:[],obj:}, ...}\n\n    p.onopentag = function (node: any) {\n      var nsName = node.name;\n      var attrs = node.attributes;\n\n      var name = splitQName(nsName).name,\n        attributeName,\n        top = stack[stack.length - 1],\n        topSchema = top.schema,\n        elementAttributes: any = {},\n        hasNonXmlnsAttribute = false,\n        hasNilAttribute = false,\n        obj: any = {};\n      var originalName = name;\n\n      if (!objectName && top.name === 'Body' && name !== 'Fault') {\n        var message = self.definitions.messages[name];\n        // Support RPC/literal messages where response body contains one element named\n        // after the operation + 'Response'. See http://www.w3.org/TR/wsdl#_names\n        if (!message) {\n          // Determine if this is request or response\n          var isInput = false;\n          var isOutput = false;\n          if ((/Response$/).test(name)) {\n            isOutput = true;\n            name = name.replace(/Response$/, '');\n          } else if ((/Request$/).test(name)) {\n            isInput = true;\n            name = name.replace(/Request$/, '');\n          } else if ((/Solicit$/).test(name)) {\n            isInput = true;\n            name = name.replace(/Solicit$/, '');\n          }\n          // Look up the appropriate message as given in the portType's operations\n          var portTypes = self.definitions.portTypes;\n          var portTypeNames = Object.keys(portTypes);\n          // Currently this supports only one portType definition.\n          var portType = portTypes[portTypeNames[0]];\n          if (isInput) {\n            name = portType.methods[name].input.$name;\n          } else {\n            name = portType.methods[name].output.$name;\n          }\n          message = self.definitions.messages[name];\n          // 'cache' this alias to speed future lookups\n          self.definitions.messages[originalName] = self.definitions.messages[name];\n        }\n\n        topSchema = message.description(self.definitions);\n        objectName = originalName;\n      }\n\n      if (attrs.href) {\n        id = attrs.href.substr(1);\n        if (!refs[id]) {\n          refs[id] = { hrefs: [], obj: null };\n        }\n        refs[id].hrefs.push({ par: top.object, key: name, obj: obj });\n      }\n      if (id = attrs.id) {\n        if (!refs[id]) {\n          refs[id] = { hrefs: [], obj: null };\n        }\n      }\n\n      //Handle element attributes\n      for (attributeName in attrs) {\n        if (/^xmlns:|^xmlns$/.test(attributeName)) {\n          xmlns[splitQName(attributeName).name] = attrs[attributeName];\n          continue;\n        }\n        hasNonXmlnsAttribute = true;\n        elementAttributes[attributeName] = attrs[attributeName];\n      }\n\n      for (attributeName in elementAttributes) {\n        var res = splitQName(attributeName);\n        if (res.name === 'nil' && xmlns[res.prefix] === 'http://www.w3.org/2001/XMLSchema-instance') {\n          hasNilAttribute = true;\n          break;\n        }\n      }\n\n      if (hasNonXmlnsAttribute) {\n        obj[self.options.attributesKey] = elementAttributes;\n      }\n\n      // Pick up the schema for the type specified in element's xsi:type attribute.\n      var xsiTypeSchema;\n      var xsiType = elementAttributes['xsi:type'];\n      if (xsiType) {\n        var type = splitQName(xsiType);\n        var typeURI;\n        if (type.prefix === TNS_PREFIX) {\n          // In case of xsi:type = \"MyType\"\n          typeURI = xmlns[type.prefix] || xmlns.xmlns;\n        } else {\n          typeURI = xmlns[type.prefix];\n        }\n        var typeDef = self.findSchemaObject(typeURI, type.name);\n        if (typeDef) {\n          xsiTypeSchema = typeDef.description(self.definitions);\n        }\n      }\n\n      if (topSchema && topSchema[name + '[]']) {\n        name = name + '[]';\n      }\n      stack.push({ name: originalName, object: obj, schema: (xsiTypeSchema || (topSchema && topSchema[name])), id: attrs.id, nil: hasNilAttribute });\n    };\n\n    p.onclosetag = function (nsName) {\n      var cur = stack.pop(),\n        obj = cur.object,\n        top = stack[stack.length - 1],\n        topObject = top.object,\n        topSchema = top.schema,\n        name = splitQName(nsName).name;\n\n      if (typeof cur.schema === 'string' && (cur.schema === 'string' || cur.schema.split(':')[1] === 'string')) {\n        if (typeof obj === 'object' && Object.keys(obj).length === 0) obj = cur.object = '';\n      }\n\n      if (cur.nil === true) {\n        return;\n      }\n\n      if (_.isPlainObject(obj) && !Object.keys(obj).length) {\n        obj = null;\n      }\n\n      if (topSchema && topSchema[name + '[]']) {\n        if (!topObject[name]) {\n          topObject[name] = [];\n        }\n        topObject[name].push(obj);\n      } else if (name in topObject) {\n        if (!Array.isArray(topObject[name])) {\n          topObject[name] = [topObject[name]];\n        }\n        topObject[name].push(obj);\n      } else {\n        topObject[name] = obj;\n      }\n\n      if (cur.id) {\n        refs[cur.id].obj = obj;\n      }\n    };\n\n    p.oncdata = function (text) {\n      text = trim(text);\n      if (!text.length) {\n        return;\n      }\n\n      if (/<\\?xml[\\s\\S]+\\?>/.test(text)) {\n        var top = stack[stack.length - 1];\n        var value = self.xmlToObject(text);\n        if (top.object[self.options.attributesKey]) {\n          top.object[self.options.valueKey] = value;\n        } else {\n          top.object = value;\n        }\n      } else {\n        p.ontext(text);\n      }\n    };\n\n    p.onerror = function (e) {\n      p.resume();\n      throw {\n        Fault: {\n          faultcode: 500,\n          faultstring: 'Invalid XML',\n          detail: new Error(e.message).message,\n          statusCode: 500\n        }\n      };\n    };\n\n    p.ontext = function (text) {\n      text = trim(text);\n      if (!text.length) {\n        return;\n      }\n\n      var top = stack[stack.length - 1];\n      var name = splitQName(top.schema).name,\n        value;\n      if (self.options && self.options.customDeserializer && self.options.customDeserializer[name]) {\n        value = self.options.customDeserializer[name](text, top);\n      }\n      else {\n        if (name === 'int' || name === 'integer') {\n          value = parseInt(text, 10);\n        } else if (name === 'bool' || name === 'boolean') {\n          value = text.toLowerCase() === 'true' || text === '1';\n        } else if (name === 'dateTime' || name === 'date') {\n          value = new Date(text);\n        } else {\n          // handle string or other types\n          if (typeof top.object !== 'string') {\n            value = text;\n          } else {\n            value = top.object + text;\n          }\n        }\n      }\n\n      if (top.object[self.options.attributesKey]) {\n        top.object[self.options.valueKey] = value;\n      } else {\n        top.object = value;\n      }\n    };\n\n    if (typeof callback === 'function') {\n      // we be streaming\n      var saxStream = sax.createStream(true, {});\n      saxStream.on('opentag', p.onopentag);\n      saxStream.on('closetag', p.onclosetag);\n      saxStream.on('cdata', p.oncdata);\n      saxStream.on('text', p.ontext);\n      xml.pipe(saxStream)\n        .on('error', function (err: any) {\n          callback(err);\n        })\n        .on('end', function () {\n          var r;\n          try {\n            r = finish();\n          } catch (e) {\n            return callback(e);\n          }\n          callback(null, r);\n        });\n      return;\n    }\n    p.write(xml).close();\n\n    return finish();\n\n    function finish() {\n      // MultiRef support: merge objects instead of replacing\n      for (var n in refs) {\n        var ref = refs[n];\n        for (var i = 0; i < ref.hrefs.length; i++) {\n          _.assign(ref.hrefs[i].obj, ref.obj);\n        }\n      }\n\n      if (root.Envelope) {\n        var body = root.Envelope.Body;\n        if (body && body.Fault) {\n          var code = body.Fault && body.Fault.faultcode && body.Fault.faultcode.$value ? body.Fault.faultcode.$value : body.Fault && body.Fault.faultcode;\n          // selectn('faultcode.$value', body.Fault) || selectn('faultcode', body.Fault);\n          var string = body.Fault && body.Fault.faultstring && body.Fault.faultstring.$value ? body.Fault.faultstring.$value : body.Fault && body.Fault.faultstring;\n          // selectn('faultstring.$value', body.Fault) || selectn('faultstring', body.Fault);\n          var detail = body.Fault && body.Fault.detail && body.Fault.detail.$value ? body.Fault.detail.$value : body.Fault && body.Fault.detail && body.Fault.detail.message;\n          // selectn('detail.$value', body.Fault) || selectn('detail.message', body.Fault);\n          var error: any = new Error(code + ': ' + string + (detail ? ': ' + detail : ''));\n          error.root = root;\n          throw error;\n        }\n        return root.Envelope;\n      }\n      return root;\n    }\n  }\n\n  private _processNextInclude(includes: any[]): Promise<any> {\n    return new Promise((resolve, reject) => {\n      resolve(this.definitions);\n\n      // var include = includes.shift();\n      // var options;\n      // if (!include) { resolve(this.definitions) }\n\n      // var includePath = resolveUrl(this.uri || '', include.location);\n\n      // options = _.assign({}, this.options);\n      // // follow supplied ignoredNamespaces option\n      // options.ignoredNamespaces = this._originalIgnoredNamespaces || this.options.ignoredNamespaces;\n\n      // return openWsdl(includePath, options)\n      //   .then(wsdl => {\n      //     this._includesWsdl.push(wsdl);\n\n      //     if (wsdl.definitions instanceof DefinitionsElement) {\n      //       _.merge(this.definitions, wsdl.definitions, function (a: any, b: any) {\n      //         return (a instanceof SchemaElement) ? a.merge(b) : undefined;\n      //       });\n      //     } else {\n      //       this.definitions.schemas[include.namespace || wsdl.definitions.$targetNamespace] = deepMerge(this.definitions.schemas[include.namespace || wsdl.definitions.$targetNamespace], wsdl.definitions);\n      //     }\n\n      //     return this._processNextInclude(includes);\n      //   })\n      //   .catch(err => reject(err));\n    });\n  }\n\n  private _initializeOptions(options: any) {\n    this._originalIgnoredNamespaces = (options || {}).ignoredNamespaces;\n    this.options = {};\n\n    var ignoredNamespaces = options ? options.ignoredNamespaces : null;\n\n    if (ignoredNamespaces &&\n      (Array.isArray(ignoredNamespaces.namespaces) || typeof ignoredNamespaces.namespaces === 'string')) {\n      if (ignoredNamespaces.override) {\n        this.options.ignoredNamespaces = ignoredNamespaces.namespaces;\n      } else {\n        this.options.ignoredNamespaces = this.ignoredNamespaces.concat(ignoredNamespaces.namespaces);\n      }\n    } else {\n      this.options.ignoredNamespaces = this.ignoredNamespaces;\n    }\n\n    this.options.valueKey = options.valueKey || this.valueKey;\n    this.options.xmlKey = options.xmlKey || this.xmlKey;\n    if (options.escapeXML !== undefined) {\n      this.options.escapeXML = options.escapeXML;\n    } else {\n      this.options.escapeXML = true;\n    }\n    // Allow any request headers to keep passing through\n    this.options.wsdl_headers = options.wsdl_headers;\n    this.options.wsdl_options = options.wsdl_options;\n    if (options.httpClient) {\n      this.options.httpClient = options.httpClient;\n    }\n\n    // // The supplied request-object should be passed through\n    // if (options.request) {\n    //   this.options.request = options.request;\n    // }\n\n    var ignoreBaseNameSpaces = options ? options.ignoreBaseNameSpaces : null;\n    if (ignoreBaseNameSpaces !== null && typeof ignoreBaseNameSpaces !== 'undefined') {\n      this.options.ignoreBaseNameSpaces = ignoreBaseNameSpaces;\n    } else {\n      this.options.ignoreBaseNameSpaces = this.ignoreBaseNameSpaces;\n    }\n\n    // Works only in client\n    this.options.forceSoap12Headers = options.forceSoap12Headers;\n    this.options.customDeserializer = options.customDeserializer;\n\n    if (options.overrideRootElement !== undefined) {\n      this.options.overrideRootElement = options.overrideRootElement;\n    }\n  }\n\n  private _fromXML(xml: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.definitions = this._parse(xml);\n      this.definitions.descriptions = {\n        types: {}\n      };\n\n      this.xml = xml;\n      resolve(this.definitions);\n    });\n  }\n\n  private _parse(xml: any): Element {\n    let self = this,\n      p = sax.parser(true, {}),\n      stack: any = [],\n      root: any = null,\n      types = null,\n      schema = null,\n      options = self.options;\n\n    p.onopentag = function (node) {\n      var nsName = node.name;\n      var attrs = node.attributes;\n\n      var top = stack[stack.length - 1];\n      var name;\n\n      if (top) {\n        try {\n          stack = top.startElement(stack, nsName, attrs, options);\n        } catch (e) {\n          if (self.options.strict) {\n            throw e;\n          } else {\n            stack.push(new Element(nsName, attrs, options));\n          }\n        }\n      } else {\n        name = splitQName(nsName).name;\n        if (name === 'definitions') {\n          root = new DefinitionsElement(nsName, attrs, options);\n          stack.push(root);\n        } else if (name === 'schema') {\n          // Shim a structure in here to allow the proper objects to be created when merging back.\n          root = new DefinitionsElement('definitions', {}, {});\n          types = new TypesElement('types', {}, {});\n          schema = new SchemaElement(nsName, attrs, options);\n          types.addChild(schema);\n          root.addChild(types);\n          stack.push(schema);\n        } else {\n          throw new Error('Unexpected root element of WSDL or include');\n        }\n      }\n    };\n\n    p.onclosetag = function (name) {\n      var top = stack[stack.length - 1];\n      // assert(top, 'Unmatched close tag: ' + name);\n      stack = top.endElement(stack, name);\n\n    };\n\n    p.write(xml).close();\n    return root;\n  }\n\n  private _xmlnsMap(): string {\n    var xmlns = this.definitions.xmlns;\n    var str = '';\n    for (var alias in xmlns) {\n      if (alias === '' || alias === TNS_PREFIX) {\n        continue;\n      }\n      var ns = xmlns[alias];\n      switch (ns) {\n        case \"http://xml.apache.org/xml-soap\": // apachesoap\n        case \"http://schemas.xmlsoap.org/wsdl/\": // wsdl\n        case \"http://schemas.xmlsoap.org/wsdl/soap/\": // wsdlsoap\n        case \"http://schemas.xmlsoap.org/wsdl/soap12/\": // wsdlsoap12\n        case \"http://schemas.xmlsoap.org/soap/encoding/\": // soapenc\n        case \"http://www.w3.org/2001/XMLSchema\": // xsd\n          continue;\n      }\n      if (~ns.indexOf('http://schemas.xmlsoap.org/')) {\n        continue;\n      }\n      if (~ns.indexOf('http://www.w3.org/')) {\n        continue;\n      }\n      if (~ns.indexOf('http://xml.apache.org/')) {\n        continue;\n      }\n      str += ' xmlns:' + alias + '=\"' + ns + '\"';\n    }\n    return str;\n  }\n}\n\nclass Element {\n  ignoredNamespaces: any;\n  xmlKey: any;\n  nsName: any;\n  prefix: any;\n  name: any;\n  children: any[] = [];\n  xmlns: any;\n  valueKey: any;\n  allowedChildren: any = {};\n  $targetNamespace: any;\n  $name: any;\n\n  $maxOccurs: any;\n  $minOccurs: any;\n  $ref: any;\n  $base: any;\n  $type: any;\n  schemas: any;\n  messages: any;\n  portTypes: any;\n  bindings: any;\n  services: any;\n  includes: any[] = [];\n  elements: any;\n  types: any;\n  complexTypes: any;\n  element: any;\n  parts: any;\n  soapAction: string;\n  style: string;\n  outputSoap: any;\n  inputSoap: any;\n  output: any;\n  input: any;\n  methods: any = {};\n  transport: string;\n  location: any;\n  ports: any = {};\n  encodingStyle: any;\n  use: any;\n\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    var parts = splitQName(nsName);\n\n    this.nsName = nsName;\n    this.prefix = parts.prefix;\n    this.name = parts.name;\n    this.children = [];\n    this.xmlns = {};\n\n    this._initializeOptions(options);\n\n    for (var key in attrs) {\n      var match = /^xmlns:?(.*)$/.exec(key);\n      if (match) {\n        this.xmlns[match[1] ? match[1] : TNS_PREFIX] = attrs[key];\n      }\n      else {\n        if (key === 'value') {\n          (this as any)[this.valueKey] = attrs[key];\n        } else {\n          (this as any)['$' + key] = attrs[key];\n        }\n      }\n    }\n    if (this.$targetNamespace !== undefined) {\n      // Add targetNamespace to the mapping\n      this.xmlns[TNS_PREFIX] = this.$targetNamespace;\n    }\n\n    // this.allowedChildren = mapElementTypes(splitQName(nsName).name);\n  }\n\n  private _initializeOptions(options: any) {\n    if (options) {\n      this.valueKey = options.valueKey || '$value';\n      this.xmlKey = options.xmlKey || '$xml';\n      this.ignoredNamespaces = options.ignoredNamespaces || [];\n    } else {\n      this.valueKey = '$value';\n      this.xmlKey = '$xml';\n      this.ignoredNamespaces = [];\n    }\n  };\n\n  deleteFixedAttrs() {\n    this.children && this.children.length === 0 && delete this.children;\n    this.xmlns && Object.keys(this.xmlns).length === 0 && delete this.xmlns;\n    delete this.nsName;\n    delete this.prefix;\n    delete this.name;\n  };\n\n  startElement(stack: any, nsName: any, attrs: any, options: any) {\n    // if (!this.allowedChildren) {\n    //   return;\n    // }\n\n    // let ChildClass = this.allowedChildren[splitQName(nsName).name];\n    // let element = null;\n    // if (ChildClass) {\n    //   stack.push(new ChildClass(nsName, attrs, options));\n    // }\n    // else {\n    //   this.unexpected(nsName);\n    // }\n\n    let ChildClass = ElementTypeMap[splitQName(nsName).name][0];\n    if (ChildClass) {\n      stack.push(new ChildClass(nsName, attrs, options))\n    };\n\n    return stack;\n  }\n\n  unexpected(name: any) {\n    throw new Error('Found unexpected element (' + name + ') inside ' + this.nsName);\n  }\n\n  endElement(stack: any, nsName: any) {\n    if (this.nsName === nsName) {\n      if (stack.length < 2)\n        return;\n      var parent: Element = stack[stack.length - 2];\n      if (this !== stack[0]) {\n        _.defaultsDeep(stack[0].xmlns, this.xmlns);\n        // delete this.xmlns;\n        parent.children.push(this);\n        parent.addChild(this);\n      }\n      stack.pop();\n    }\n\n    return stack;\n  }\n\n  addChild(child: any) { return }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    return this.$name || this.name;\n  }\n\n  init() {\n\n  }\n}\n\nclass MessageElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n    this.init();\n  }\n\n  init() {\n    this.element = null;\n    this.parts = null;\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    if (this.element) {\n      return this.element && this.element.description(definitions);\n    }\n    var desc: any = {};\n    desc[this.$name] = this.parts;\n    return desc;\n  }\n\n  postProcess(definitions: any) {\n    var part = null;\n    var child;\n    var children = this.children || [];\n    var ns;\n    var nsName;\n    var i;\n    var type;\n\n    for (i in children) {\n      if ((child = children[i]).name === 'part') {\n        part = child;\n        break;\n      }\n    }\n\n    if (!part) {\n      return;\n    }\n\n    if (part.$element) {\n      var lookupTypes = [],\n        elementChildren;\n\n      delete this.parts;\n\n      nsName = splitQName(part.$element);\n      ns = nsName.prefix;\n      var schema = definitions.schemas[definitions.xmlns[ns]];\n      this.element = schema.elements[nsName.name];\n      if (!this.element) { return; }\n      this.element.targetNSAlias = ns;\n      this.element.targetNamespace = definitions.xmlns[ns];\n\n      // set the optional $lookupType to be used within `client#_invoke()` when\n      // calling `wsdl#objectToDocumentXML()\n      this.element.$lookupType = part.$element;\n\n      elementChildren = this.element.children;\n\n      // get all nested lookup types (only complex types are followed)\n      if (elementChildren.length > 0) {\n        for (i = 0; i < elementChildren.length; i++) {\n          lookupTypes.push(this._getNestedLookupTypeString(elementChildren[i]));\n        }\n      }\n\n      // if nested lookup types where found, prepare them for furter usage\n      if (lookupTypes.length > 0) {\n        lookupTypes = lookupTypes.\n          join('_').\n          split('_').\n          filter(function removeEmptyLookupTypes(type) {\n            return type !== '^';\n          });\n\n        var schemaXmlns = definitions.schemas[this.element.targetNamespace].xmlns;\n\n        for (i = 0; i < lookupTypes.length; i++) {\n          lookupTypes[i] = this._createLookupTypeObject(lookupTypes[i], schemaXmlns);\n        }\n      }\n\n      this.element.$lookupTypes = lookupTypes;\n\n      if (this.element.$type) {\n        type = splitQName(this.element.$type);\n        var typeNs = schema.xmlns && schema.xmlns[type.prefix] || definitions.xmlns[type.prefix];\n\n        if (typeNs) {\n          if (type.name in Primitives) {\n            // this.element = this.element.$type;\n          }\n          else {\n            // first check local mapping of ns alias to namespace\n            schema = definitions.schemas[typeNs];\n            var ctype = schema.complexTypes[type.name] || schema.types[type.name] || schema.elements[type.name];\n\n\n            if (ctype) {\n              this.parts = ctype.description(definitions, schema.xmlns);\n            }\n          }\n        }\n      }\n      else {\n        var method = this.element.description(definitions, schema.xmlns);\n        this.parts = method[nsName.name];\n      }\n\n\n      this.children.splice(0, 1);\n    } else {\n      // rpc encoding\n      this.parts = {};\n      delete this.element;\n      for (i = 0; part = this.children[i]; i++) {\n        if (part.name === 'documentation') {\n          // <wsdl:documentation can be present under <wsdl:message>\n          continue;\n        }\n        //assert(part.name === 'part', 'Expected part element');\n        nsName = splitQName(part.$type);\n        ns = definitions.xmlns[nsName.prefix];\n        type = nsName.name;\n        var schemaDefinition = definitions.schemas[ns];\n        if (typeof schemaDefinition !== 'undefined') {\n          this.parts[part.$name] = definitions.schemas[ns].types[type] || definitions.schemas[ns].complexTypes[type];\n        } else {\n          this.parts[part.$name] = part.$type;\n        }\n\n        if (typeof this.parts[part.$name] === 'object') {\n          this.parts[part.$name].prefix = nsName.prefix;\n          this.parts[part.$name].xmlns = ns;\n        }\n\n        this.children.splice(i--, 1);\n      }\n    }\n    this.deleteFixedAttrs();\n  }\n\n  private _createLookupTypeObject(nsString: any, xmlns: any) {\n    var splittedNSString = splitQName(nsString),\n      nsAlias = splittedNSString.prefix,\n      splittedName = splittedNSString.name.split('#'),\n      type = splittedName[0],\n      name = splittedName[1],\n      lookupTypeObj: any = {};\n\n    lookupTypeObj.$namespace = xmlns[nsAlias];\n    lookupTypeObj.$type = nsAlias + ':' + type;\n    lookupTypeObj.$name = name;\n\n    return lookupTypeObj;\n  }\n\n  private _getNestedLookupTypeString(element: any) {\n    var resolvedType = '^',\n      excluded = this.ignoredNamespaces.concat('xs'); // do not process $type values wich start with\n\n    if (element.hasOwnProperty('$type') && typeof element.$type === 'string') {\n      if (excluded.indexOf(element.$type.split(':')[0]) === -1) {\n        resolvedType += ('_' + element.$type + '#' + element.$name);\n      }\n    }\n\n    if (element.children.length > 0) {\n      element.children.forEach((child: any) => {\n        var resolvedChildType = this._getNestedLookupTypeString(child).replace(/\\^_/, '');\n\n        if (resolvedChildType && typeof resolvedChildType === 'string') {\n          resolvedType += ('_' + resolvedChildType);\n        }\n      });\n    }\n\n    return resolvedType;\n  }\n}\n\nclass SchemaElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n    this.init();\n  }\n\n  init() {\n    this.complexTypes = {};\n    this.types = {};\n    this.elements = {};\n    this.includes = [];\n  }\n\n  merge(source: any): SchemaElement {\n    //assert(source instanceof SchemaElement);\n    if (this.$targetNamespace === source.$targetNamespace) {\n      _.merge(this.complexTypes, source.complexTypes);\n      _.merge(this.types, source.types);\n      _.merge(this.elements, source.elements);\n      _.merge(this.xmlns, source.xmlns);\n    }\n\n    return this;\n  }\n\n  addChild(child: any) {\n    if (child.$name in Primitives) return;\n    if (child.name === 'include' || child.name === 'import') {\n      var location = child.$schemaLocation || child.$location;\n      if (location) {\n        this.includes.push({\n          namespace: child.$namespace || child.$targetNamespace || this.$targetNamespace,\n          location: location\n        });\n      }\n    }\n    else if (child.name === 'complexType') {\n      this.complexTypes[child.$name] = child;\n    }\n    else if (child.name === 'element') {\n      this.elements[child.$name] = child;\n    }\n    else if (child.$name) {\n      this.types[child.$name] = child;\n    }\n    this.children.pop();\n  }\n}\n\nclass TypesElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  init() {\n    this.schemas = {};\n  }\n\n  addChild(child: any) {\n    //assert(child instanceof SchemaElement);\n\n    var targetNamespace = child.$targetNamespace;\n\n    if (!this.schemas.hasOwnProperty(targetNamespace)) {\n      this.schemas[targetNamespace] = child;\n    } else {\n      console.error('Target-Namespace \"' + targetNamespace + '\" already in use by another Schema!');\n    }\n  }\n}\n\nclass ElementElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var element: any = {},\n      name = this.$name;\n    var isMany = !this.$maxOccurs ? false : (isNaN(this.$maxOccurs) ? (this.$maxOccurs === 'unbounded') : (this.$maxOccurs > 1));\n    if (this.$minOccurs !== this.$maxOccurs && isMany) {\n      name += '[]';\n    }\n\n    if (xmlns && xmlns[TNS_PREFIX]) {\n      this.$targetNamespace = xmlns[TNS_PREFIX];\n    }\n    var type = this.$type || this.$ref;\n    if (type) {\n      type = splitQName(type);\n      var typeName = type.name,\n        ns = xmlns && xmlns[type.prefix] || definitions.xmlns[type.prefix],\n        schema = definitions.schemas[ns],\n        typeElement = schema && (this.$type ? schema.complexTypes[typeName] || schema.types[typeName] : schema.elements[typeName]);\n\n      if (ns && definitions.schemas[ns]) {\n        xmlns = definitions.schemas[ns].xmlns;\n      }\n\n      if (typeElement && !(typeName in Primitives)) {\n\n        if (!(typeName in definitions.descriptions.types)) {\n\n          var elem: any = {};\n          definitions.descriptions.types[typeName] = elem;\n          var description = typeElement.description(definitions, xmlns);\n          if (typeof description === 'string') {\n            elem = description;\n          }\n          else {\n            Object.keys(description).forEach(function (key) {\n              elem[key] = description[key];\n            });\n          }\n\n          if (this.$ref) {\n            element = elem;\n          }\n          else {\n            element[name] = elem;\n          }\n\n          if (typeof elem === 'object') {\n            elem.targetNSAlias = type.prefix;\n            elem.targetNamespace = ns;\n          }\n\n          definitions.descriptions.types[typeName] = elem;\n        }\n        else {\n          if (this.$ref) {\n            element = definitions.descriptions.types[typeName];\n          }\n          else {\n            element[name] = definitions.descriptions.types[typeName];\n          }\n        }\n\n      }\n      else {\n        element[name] = this.$type;\n      }\n    }\n    else {\n      var children = this.children;\n      element[name] = {};\n      for (var i = 0, child; child = children[i]; i++) {\n        if (child instanceof ComplexTypeElement) {\n          element[name] = child.description(definitions, xmlns);\n        }\n      }\n    }\n    return element;\n  }\n}\n\nclass AnyElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var children = this.children;\n    var sequence: any = {};\n    for (var i = 0, child; child = children[i]; i++) {\n      if (child instanceof AnyElement) {\n        continue;\n      }\n      var description = child.description(definitions, xmlns);\n      for (var key in description) {\n        sequence[key] = description[key];\n      }\n    }\n    return sequence;\n  }\n}\n\nclass InputElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  addChild(child: any) {\n    if (child.name === 'body') {\n      this.use = child.$use;\n      if (this.use === 'encoded') {\n        this.encodingStyle = child.$encodingStyle;\n      }\n      this.children.pop();\n    }\n  }\n}\n\nclass OutputElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  addChild(child: any) {\n    if (child.name === 'body') {\n      this.use = child.$use;\n      if (this.use === 'encoded') {\n        this.encodingStyle = child.$encodingStyle;\n      }\n      this.children.pop();\n    }\n  }\n}\n\nclass SimpleTypeElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var children = this.children;\n    for (var i = 0, child; child = children[i]; i++) {\n      if (child instanceof RestrictionElement)\n        return this.$name + \"|\" + child.description();\n    }\n    return {};\n  }\n}\n\nclass RestrictionElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var children = this.children;\n    var desc;\n    for (var i = 0, child; child = children[i]; i++) {\n      if (child instanceof SequenceElement ||\n        child instanceof ChoiceElement) {\n        desc = child.description(definitions, xmlns);\n        break;\n      }\n    }\n    if (desc && this.$base) {\n      var type = splitQName(this.$base),\n        typeName = type.name,\n        ns = xmlns && xmlns[type.prefix] || definitions.xmlns[type.prefix],\n        schema = definitions.schemas[ns],\n        typeElement = schema && (schema.complexTypes[typeName] || schema.types[typeName] || schema.elements[typeName]);\n\n      desc.getBase = function () {\n        return typeElement.description(definitions, schema.xmlns);\n      };\n      return desc;\n    }\n\n    // then simple element\n    var base = this.$base ? this.$base + \"|\" : \"\";\n    return base + this.children.map(function (child) {\n      return child.description();\n    }).join(\",\");\n  }\n}\n\nclass ExtensionElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any) {\n    var children = this.children;\n    var desc = {};\n    for (var i = 0, child; child = children[i]; i++) {\n      if (child instanceof SequenceElement ||\n        child instanceof ChoiceElement) {\n        desc = child.description(definitions, xmlns);\n      }\n    }\n    if (this.$base) {\n      var type = splitQName(this.$base),\n        typeName = type.name,\n        ns = xmlns && xmlns[type.prefix] || definitions.xmlns[type.prefix],\n        schema = definitions.schemas[ns];\n\n      if (typeName in Primitives) {\n        return this.$base;\n      }\n      else {\n        var typeElement = schema && (schema.complexTypes[typeName] ||\n          schema.types[typeName] || schema.elements[typeName]);\n\n        if (typeElement) {\n          var base = typeElement.description(definitions, schema.xmlns);\n          desc = _.defaultsDeep(base, desc);\n        }\n      }\n    }\n    return desc;\n  }\n}\n\nclass ChoiceElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any) {\n    var children = this.children;\n    var choice: any = {};\n    for (var i = 0, child; child = children[i]; i++) {\n      var description = child.description(definitions, xmlns);\n      for (var key in description) {\n        choice[key] = description[key];\n      }\n    }\n    return choice;\n  }\n}\n\nclass EnumerationElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    return (this as any)[this.valueKey];\n  }\n}\n\nclass ComplexTypeElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var children = this.children || [];\n    for (var i = 0, child; child = children[i]; i++) {\n      if (child instanceof ChoiceElement ||\n        child instanceof SequenceElement ||\n        child instanceof AllElement ||\n        child instanceof SimpleContentElement ||\n        child instanceof ComplexContentElement) {\n\n        return child.description(definitions, xmlns);\n      }\n    }\n    return {};\n  }\n}\n\nclass ComplexContentElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var children = this.children;\n    for (var i = 0, child; child = children[i]; i++) {\n      if (child instanceof ExtensionElement) {\n        return child.description(definitions, xmlns);\n      }\n    }\n    return {};\n  }\n}\n\nclass SimpleContentElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var children = this.children;\n    for (var i = 0, child; child = children[i]; i++) {\n      if (child instanceof ExtensionElement) {\n        return child.description(definitions, xmlns);\n      }\n    }\n    return {};\n  }\n}\n\nclass SequenceElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var children = this.children;\n    var sequence: any = {};\n    for (var i = 0, child; child = children[i]; i++) {\n      if (child instanceof AnyElement) {\n        continue;\n      }\n      var description = child.description(definitions, xmlns);\n      for (var key in description) {\n        sequence[key] = description[key];\n      }\n    }\n    return sequence;\n  }\n}\n\nclass AllElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var children = this.children;\n    var sequence: any = {};\n    for (var i = 0, child; child = children[i]; i++) {\n      if (child instanceof AnyElement) {\n        continue;\n      }\n      var description = child.description(definitions, xmlns);\n      for (var key in description) {\n        sequence[key] = description[key];\n      }\n    }\n    return sequence;\n  }\n}\n\nclass OperationElement extends Element {\n\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  init() {\n    this.input = null;\n    this.output = null;\n    this.inputSoap = null;\n    this.outputSoap = null;\n    this.style = '';\n    this.soapAction = '';\n  }\n\n  addChild(child: any) {\n    if (child.name === 'operation') {\n      this.soapAction = child.$soapAction || '';\n      this.style = child.$style || '';\n      this.children.pop();\n    }\n  }\n\n  postProcess(definitions: any, tag: any) {\n    var children = this.children;\n    for (var i = 0, child; child = children[i]; i++) {\n      if (child.name !== 'input' && child.name !== 'output')\n        continue;\n      if (tag === 'binding') {\n        (this as any)[child.name] = child;\n        children.splice(i--, 1);\n        continue;\n      }\n      var messageName = splitQName(child.$message).name;\n      var message = definitions.messages[messageName];\n      message.postProcess(definitions);\n      if (message.element) {\n        definitions.messages[message.element.$name] = message;\n        (this as any)[child.name] = message.element;\n      }\n      else {\n        (this as any)[child.name] = message;\n      }\n      children.splice(i--, 1);\n    }\n    this.deleteFixedAttrs();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var inputDesc = this.input ? this.input.description(definitions) : null;\n    var outputDesc = this.output ? this.output.description(definitions) : null;\n    return {\n      input: inputDesc && inputDesc[Object.keys(inputDesc)[0]],\n      output: outputDesc && outputDesc[Object.keys(outputDesc)[0]]\n    }\n  }\n}\n\nclass PortTypeElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  init() {\n    this.methods = {};\n  }\n\n  postProcess(definitions: any) {\n    var children = this.children;\n    if (typeof children === 'undefined')\n      return;\n    for (var i = 0, child; child = children[i]; i++) {\n      if (child.name !== 'operation')\n        continue;\n      child.postProcess(definitions, 'portType');\n      this.methods[child.$name] = child;\n      children.splice(i--, 1);\n    }\n    delete this.$name;\n    this.deleteFixedAttrs();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var methods: any = {};\n    for (var name in this.methods) {\n      var method = this.methods[name];\n      methods[name] = method.description(definitions);\n    }\n    return methods;\n  }\n\n}\n\nclass BindingElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  init() {\n    this.transport = '';\n    this.style = '';\n    this.methods = {};\n  }\n\n  addChild(child: any) {\n    if (child.name === 'binding') {\n      this.transport = child.$transport;\n      this.style = child.$style;\n      this.children.pop();\n    }\n  }\n\n  postProcess(definitions: any) {\n    var type = splitQName(this.$type).name,\n      portType = definitions.portTypes[type],\n      style = this.style,\n      children = this.children;\n    if (portType) {\n      portType.postProcess(definitions);\n      this.methods = portType.methods;\n\n      for (var i = 0, child; child = children[i]; i++) {\n        if (child.name !== 'operation')\n          continue;\n        child.postProcess(definitions, 'binding');\n        children.splice(i--, 1);\n        child.style || (child.style = style);\n        var method = this.methods[child.$name];\n\n        if (method) {\n          method.style = child.style;\n          method.soapAction = child.soapAction;\n          method.inputSoap = child.input || null;\n          method.outputSoap = child.output || null;\n          method.inputSoap && method.inputSoap.deleteFixedAttrs();\n          method.outputSoap && method.outputSoap.deleteFixedAttrs();\n        }\n      }\n    }\n    delete this.$name;\n    delete this.$type;\n    this.deleteFixedAttrs();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var methods: any = {};\n    for (var name in this.methods) {\n      var method = this.methods[name];\n      methods[name] = method.description(definitions);\n    }\n    return methods;\n  }\n}\n\nclass PortElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  init() {\n    this.location = null;\n  }\n\n  addChild(child: any) {\n    if (child.name === 'address' && typeof (child.$location) !== 'undefined') {\n      this.location = child.$location;\n    }\n  }\n}\n\nclass ServiceElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  init() {\n    this.ports = {};\n  }\n\n  postProcess(definitions: any) {\n    var children = this.children,\n      bindings = definitions.bindings;\n    if (children && children.length > 0) {\n      for (var i = 0, child; child = children[i]; i++) {\n        if (child.name !== 'port')\n          continue;\n        var bindingName = splitQName(child.$binding).name;\n        var binding = bindings[bindingName];\n        if (binding) {\n          binding.postProcess(definitions);\n          this.ports[child.$name] = {\n            location: child.location,\n            binding: binding\n          };\n          children.splice(i--, 1);\n        }\n      }\n    }\n    delete this.$name;\n    this.deleteFixedAttrs();\n  }\n\n  description(definitions: any = {}, xmlns?: any): any {\n    var ports: any = {};\n    for (var name in this.ports) {\n      var port = this.ports[name];\n      ports[name] = port.binding.description(definitions);\n    }\n    return ports;\n  }\n}\n\nclass DefinitionsElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n\n  init() {\n    if (this.name !== 'definitions') this.unexpected(this.nsName);\n    this.messages = {};\n    this.portTypes = {};\n    this.bindings = {};\n    this.services = {};\n    this.schemas = {};\n  }\n\n  addChild(child: any) {\n    if (child instanceof TypesElement) {\n      // Merge types.schemas into definitions.schemas\n      _.merge(this.schemas, child.schemas);\n    }\n    else if (child instanceof MessageElement) {\n      this.messages[child.$name] = child;\n    }\n    else if (child.name === 'import') {\n      this.schemas[child.$namespace] = new SchemaElement(child.$namespace, {});\n      this.schemas[child.$namespace].addChild(child);\n    }\n    else if (child instanceof PortTypeElement) {\n      this.portTypes[child.$name] = child;\n    }\n    else if (child instanceof BindingElement) {\n      if (child.transport === 'http://schemas.xmlsoap.org/soap/http' ||\n        child.transport === 'http://www.w3.org/2003/05/soap/bindings/HTTP/')\n        this.bindings[child.$name] = child;\n    }\n    else if (child instanceof ServiceElement) {\n      this.services[child.$name] = child;\n    }\n    else if (child instanceof DocumentationElement) {\n    }\n    this.children.pop();\n  }\n}\n\nclass DocumentationElement extends Element {\n  constructor(nsName: any, attrs: any = {}, options: any = {}) {\n    super(nsName, attrs, options);\n\n    this.init();\n  }\n}\n\nconst ElementTypeMap: any = {\n  types: [TypesElement, 'schema documentation'],\n  schema: [SchemaElement, 'element complexType simpleType include import'],\n  element: [ElementElement, 'annotation complexType'],\n  any: [AnyElement, ''],\n  simpleType: [SimpleTypeElement, 'restriction'],\n  restriction: [RestrictionElement, 'enumeration all choice sequence'],\n  extension: [ExtensionElement, 'all sequence choice'],\n  choice: [ChoiceElement, 'element sequence choice any'],\n  // group: [GroupElement, 'element group'],\n  enumeration: [EnumerationElement, ''],\n  complexType: [ComplexTypeElement, 'annotation sequence all complexContent simpleContent choice'],\n  complexContent: [ComplexContentElement, 'extension'],\n  simpleContent: [SimpleContentElement, 'extension'],\n  sequence: [SequenceElement, 'element sequence choice any'],\n  all: [AllElement, 'element choice'],\n\n  service: [ServiceElement, 'port documentation'],\n  port: [PortElement, 'address documentation'],\n  binding: [BindingElement, '_binding SecuritySpec operation documentation'],\n  portType: [PortTypeElement, 'operation documentation'],\n  message: [MessageElement, 'part documentation'],\n  operation: [OperationElement, 'documentation input output fault _operation'],\n  input: [InputElement, 'body SecuritySpecRef documentation header'],\n  output: [OutputElement, 'body SecuritySpecRef documentation header'],\n  fault: [Element, '_fault documentation'],\n  definitions: [DefinitionsElement, 'types message portType binding service import documentation'],\n  documentation: [DocumentationElement, '']\n}","import { findPrefix } from './utils'\nimport * as _ from 'lodash';\nimport * as assert from 'assert';\nimport * as uuid from 'uuid';\nimport { WSDL } from \"./wsdl\";\nimport { Buffer } from \"buffer\";\n\nexport class Client {\n  private endpoint: any;\n  private bodyAttributes: any;\n  private lastRequestHeaders: any;\n  private lastEndpoint: any;\n  private lastRequest: any;\n  private lastMessage: string;\n  private security: any;\n  private httpHeaders: any = {};\n  private streamAllowed: any;\n  private SOAPAction: any;\n  private soapHeaders: any;\n  private wsdl: WSDL;\n  \n  constructor(wsdl: WSDL, endpoint?: any, options?: any) {\n    options = options || {};\n    this.wsdl = wsdl;\n    this._initializeOptions(options);\n    this._initializeServices(endpoint);\n  }\n\n  addSoapHeader(soapHeader: any, name: any, namespace: any, xmlns: any) {\n    if (!this.soapHeaders) {\n      this.soapHeaders = [];\n    }\n    if (typeof soapHeader === 'object') {\n      soapHeader = this.wsdl.objectToXML(soapHeader, name, namespace, xmlns, true);\n    }\n    return this.soapHeaders.push(soapHeader) - 1;\n  }\n\n  changeSoapHeader(index: any, soapHeader: any, name: any, namespace: any, xmlns: any) {\n    if (!this.soapHeaders) {\n      this.soapHeaders = [];\n    }\n    if (typeof soapHeader === 'object') {\n      soapHeader = this.wsdl.objectToXML(soapHeader, name, namespace, xmlns, true);\n    }\n    this.soapHeaders[index] = soapHeader;\n  }\n\n  getSoapHeaders() {\n    return this.soapHeaders;\n  }\n\n  clearSoapHeaders() {\n    this.soapHeaders = null;\n  }\n\n  addHttpHeader(name: any, value: any) {\n    if (!this.httpHeaders) {\n      this.httpHeaders = {};\n    }\n\n    this.httpHeaders[name] = value;\n  }\n\n  getHttpHeaders() {\n    return this.httpHeaders;\n  }\n\n  clearHttpHeaders() {\n    this.httpHeaders = {};\n  }\n\n  addBodyAttribute(bodyAttribute: any, name: any, namespace: any, xmlns: any) {\n    if (!this.bodyAttributes) {\n      this.bodyAttributes = [];\n    }\n    if (typeof bodyAttribute === 'object') {\n      var composition = '';\n      Object.getOwnPropertyNames(bodyAttribute).forEach(function (prop, idx, array) {\n        composition += ' ' + prop + '=\"' + bodyAttribute[prop] + '\"';\n      });\n      bodyAttribute = composition;\n    }\n    if (bodyAttribute.substr(0, 1) !== ' ') bodyAttribute = ' ' + bodyAttribute;\n    this.bodyAttributes.push(bodyAttribute);\n  }\n\n  getBodyAttributes() {\n    return this.bodyAttributes;\n  }\n\n  clearBodyAttributes() {\n    this.bodyAttributes = null;\n  }\n\n  setEndpoint(endpoint: any) {\n    this.endpoint = endpoint;\n    this._initializeServices(endpoint);\n  }\n\n  describe() {\n    var types = this.wsdl.definitions.types;\n    return this.wsdl.describeServices();\n  }\n\n  setSecurity(security: any) {\n    this.security = security;\n  }\n\n  setSOAPAction(SOAPAction: any) {\n    this.SOAPAction = SOAPAction;\n  }\n\n  parseResponseBody(body: string): any {\n    try {\n      return this.wsdl.xmlToObject(body);\n    } catch (error) {\n      throw new Error(\"Error parsing body\" + error);\n    }\n  }\n\n  private _initializeServices(endpoint: any) {\n    var definitions = this.wsdl.definitions,\n      services = definitions.services;\n    for (var name in services) {\n      (this as any)[name] = this._defineService(services[name], endpoint);\n    }\n  }\n\n  private _initializeOptions(options: any = {}) {\n    this.streamAllowed = options.stream;\n    this.wsdl.options.attributesKey = options.attributesKey || 'attributes';\n    this.wsdl.options.envelopeKey = options.envelopeKey || 'soap';\n    if (options.ignoredNamespaces !== undefined) {\n      if (options.ignoredNamespaces.override !== undefined) {\n        if (options.ignoredNamespaces.override === true) {\n          if (options.ignoredNamespaces.namespaces !== undefined) {\n            this.wsdl.options.ignoredNamespaces = options.ignoredNamespaces.namespaces;\n          }\n        }\n      }\n    }\n    if (options.overrideRootElement !== undefined) {\n      this.wsdl.options.overrideRootElement = options.overrideRootElement;\n    }\n    this.wsdl.options.forceSoap12Headers = !!options.forceSoap12Headers;\n  }\n\n  private _defineService(service: any, endpoint: any) {\n    var ports = service.ports,\n      def: any = {};\n    for (var name in ports) {\n      def[name] = this._definePort(ports[name], endpoint ? endpoint : ports[name].location);\n    }\n    return def;\n  }\n\n  private _definePort(port: any, endpoint: any) {\n    var location = endpoint,\n      binding = port.binding,\n      methods = binding.methods,\n      def: any = {};\n    for (var name in methods) {\n      def[name] = this._defineMethod(methods[name], location);\n      (this as any)[name] = def[name];\n    }\n    return def;\n  }\n\n  private _defineMethod(method: any, location: any) {\n    var self = this;\n    var temp;\n    return function (args: any, callback: any, options: any, extraHeaders: any) {\n      if (typeof args === 'function') {\n        callback = args;\n        args = {};\n      } else if (typeof options === 'function') {\n        temp = callback;\n        callback = options;\n        options = temp;\n      } else if (typeof extraHeaders === 'function') {\n        temp = callback;\n        callback = extraHeaders;\n        extraHeaders = options;\n        options = temp;\n      }\n      // return self._invoke(method, args, location);\n      self._invoke(method, args, location, function (error: any, result: any, raw: any, soapHeader: any) {\n        callback(error, result, raw, soapHeader);\n      }, options, extraHeaders);\n    };\n  }\n\n  private _invoke(method: any, args: any, location: any, callback: any, options?: any, extraHeaders?: any) {\n    var self = this,\n      name = method.$name,\n      input = method.input,\n      output = method.output,\n      style = method.style,\n      defs = this.wsdl.definitions,\n      envelopeKey = this.wsdl.options.envelopeKey,\n      ns = defs.$targetNamespace,\n      encoding = '',\n      message = '',\n      xml = null,\n      req: any = null,\n      soapAction,\n      alias = findPrefix(defs.xmlns, ns),\n      headers: any = {},\n      xmlnsSoap = \"xmlns:\" + envelopeKey + \"=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\"\";\n\n    headers[\"Content-Type\"] = \"text/xml; charset=utf-8\";\n\n    if (this.wsdl.options.forceSoap12Headers) {\n      headers[\"Content-Type\"] = \"application/soap+xml; charset=utf-8\";\n      xmlnsSoap = \"xmlns:\" + envelopeKey + \"=\\\"http://www.w3.org/2003/05/soap-envelope\\\"\";\n    }\n\n    if (this.SOAPAction) {\n      soapAction = this.SOAPAction;\n    } else if (method.soapAction !== undefined && method.soapAction !== null) {\n      soapAction = method.soapAction;\n    } else {\n      soapAction = ((ns.lastIndexOf(\"/\") !== ns.length - 1) ? ns + \"/\" : ns) + name;\n    }\n\n    if (!this.wsdl.options.forceSoap12Headers) {\n      headers[\"SOAPAction\"] = '\"' + soapAction + '\"';\n    }\n\n    options = options || {};\n\n    //Add extra headers\n  \n    for (var header in this.httpHeaders) {\n      headers[header] = this.httpHeaders[header]; \n    }\n    for (var attr in extraHeaders) {\n      headers[attr] = extraHeaders[attr]; \n    }\n\n    // Allow the security object to add headers\n    if (this.security && this.security.addHeaders) {\n      headers = self.security.addHeaders(headers);\n    }\n    if (this.security && this.security.addOptions) self.security.addOptions(options);\n\n    if ((style === 'rpc') && ((input.parts || input.name === \"element\") || args === null)) {\n      assert.ok(!style || style === 'rpc', 'invalid message definition for document style binding');\n      message = self.wsdl.objectToRpcXML(name, args, alias, ns, (input.name !== \"element\"));\n      (method.inputSoap === 'encoded') && (encoding = 'soap:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" ');\n    } else {\n      assert.ok(!style || style === 'document', 'invalid message definition for rpc style binding');\n      // pass `input.$lookupType` if `input.$type` could not be found\n      message = self.wsdl.objectToDocumentXML(input.$name, args, input.targetNSAlias, input.targetNamespace, (input.$type || input.$lookupType));\n    }\n    xml = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\" +\n      \"<\" + envelopeKey + \":Envelope \" +\n      xmlnsSoap + \" \" +\n      \"xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" \" +\n      encoding +\n      this.wsdl.xmlnsInEnvelope + '>' +\n      ((self.soapHeaders || self.security) ?\n        (\n          \"<\" + envelopeKey + \":Header>\" +\n          (self.soapHeaders ? self.soapHeaders.join(\"\\n\") : \"\") +\n          (self.security && !self.security.postProcess ? self.security.toXML() : \"\") +\n          \"</\" + envelopeKey + \":Header>\"\n        )\n        :\n        ''\n      ) +\n      \"<\" + envelopeKey + \":Body\" +\n      (this.bodyAttributes ? this.bodyAttributes.join(' ') : '') +\n      (this.security && this.security.postProcess ? ' Id=\"_0\"' : '') +\n      \">\" +\n      message +\n      \"</\" + envelopeKey + \":Body>\" +\n      \"</\" + envelopeKey + \":Envelope>\";\n\n    if (self.security && self.security.postProcess) {\n      xml = self.security.postProcess(xml, envelopeKey);\n    }\n\n    this.lastMessage = message;\n    this.lastRequest = xml;\n    this.lastEndpoint = location;\n\n    var eid = options.exchangeId || uuid.v4();\n\n    var tryJSONparse = function (body: any) {\n      try {\n        return JSON.parse(body);\n      }\n      catch (err) {\n        return undefined;\n      }\n    };\n\n    callback(null, location, headers, xml);\n  }\n\n}","import { openWsdl } from './wsdl';\nimport { Client } from \"./client\";\n\nexport function createSoapClient(wsdlDef: any, options:any = {}): Promise<any> { \n  return openWsdl(wsdlDef, options)\n    .then(wsdl => {\n      return new Client(wsdl);\n    })\n    .catch(err => {throw new Error(err)});\n}","import { Injectable } from '@angular/core';\nimport { Http, Headers } from '@angular/http';\nimport { Observable } from \"rxjs/Observable\";\nimport 'rxjs/add/operator/map';\nimport { createSoapClient } from \"./libts/soap\";\nimport { Client } from \"./libts/client\";\n\n@Injectable()\nexport class SOAPService {\n\n  constructor() { }\n\n  createClient(wsdlDef: string, options: any = {}): Promise<Client> {\n    return createSoapClient(wsdlDef, options);\n  }\n}","import { NgModule } from '@angular/core';\nimport { HttpModule } from '@angular/http';\nimport { SOAPService } from './soap.service';\n\n@NgModule({\n  imports: [ HttpModule ],\n  providers: [ SOAPService ]\n})\nexport class NgxSoapModule { }","import * as _ from 'lodash';\n\nexport class BasicAuthSecurity {\n  defaults: any;\n  \n  private _password: string;\n  private _username: string;\n  \n  constructor(username: string, password: string, defaults: any) {\n    this._username = username;\n    this._password = password;\n    this.defaults = {};\n\n    _.merge(this.defaults, defaults);\n  }\n\n  addHeaders(headers: any): Headers {\n    headers['Authorization'] = 'Basic ' + btoa(this._username + ':' + this._password);\n    return headers;\n  }\n\n  toXML() {\n    return '';\n  }\n\n  addOptions(options: any) {\n    _.merge(options, this.defaults);\n  }\n}\n"],"names":["sax.parser","_.isPlainObject","sax.createStream","_.assign","_.defaultsDeep","_.merge","assert.ok","uuid.v4","SOAPService","Injectable","NgxSoapModule","NgModule","HttpModule"],"mappings":"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"}